# 風揺れエフェクト エディター v5 - 完全版

## 🆕 v5の新機能

### 🐻 クマさんピン
- ピンがかわいいクマさんの画像になりました！
- 5色のカラーバリエーション（ピンク、水色、緑、紫、黄色）
- 配置時にランダムで色が選ばれます
- アニメーション付きで登場します

### 📁 フォルダ機能（完全実装）

**基本操作**
1. Shift+クリックで複数のレイヤーを選択
2. 「📁 選択をフォルダにまとめる」ボタンをクリック
3. フォルダが作成されます

**フォルダの特徴**
- ✅ 複数レイヤーをまとめて管理
- ✅ フォルダ全体にエフェクトを適用可能
- ✅ フォルダ内の個別レイヤーにもエフェクト適用可能
- ✅ エフェクトの重ね掛けが可能
- ✅ フォルダの折りたたみ/展開
- ✅ フォルダの表示/非表示
- ✅ フォルダの解除（📂ボタン）

**エフェクトの重ね掛け**
```
📁 髪全体フォルダ（エフェクトON：全体的な揺れ）
├─ 前髪パーツ（エフェクトON：個別の細かい揺れ）
├─ 横髪パーツ（エフェクトON：個別の細かい揺れ）
└─ 後髪パーツ（エフェクトON：個別の細かい揺れ）
```

このように、個々のパーツにエフェクトをかけた上で、
フォルダ全体にもエフェクトをかけることで、
**複雑で自然な動き**を実現できます！

## 📝 使い方

### フォルダの作成
1. Shiftキーを押しながら複数のレイヤーをクリックして選択
2. 選択されたレイヤーがオレンジ色になります
3. 「📁 選択をフォルダにまとめる」ボタンをクリック
4. フォルダが作成されます

### フォルダの操作
- **▼ アイコン**: クリックで折りたたみ/展開
- **🍃 チェックボックス**: フォルダ全体にエフェクトを適用
- **👁️ アイコン**: フォルダの表示/非表示
- **📂 ボタン**: フォルダを解除して中身を展開

### レイヤーの選択
- **通常クリック**: 単一選択
- **Shift+クリック**: 複数選択

### ピンの配置
1. 「📍 ピンモード」をチェック
2. 「➕ 画像をクリックしてピンを追加」をクリック
3. 固定したい位置をクリック
4. かわいいクマさんが配置されます！

## 🎨 活用例

### 例1: キャラクターの髪
```
📁 髪全体（エフェクトON：大きな揺れ）
├─ 前髪左（エフェクトON：細かい揺れ + ピン固定）
├─ 前髪中央（エフェクトON：細かい揺れ + ピン固定）
└─ 前髪右（エフェクトON：細かい揺れ + ピン固定）
```
→ 毛束ごとに細かく揺らしながら、全体的にも大きく揺れる自然な動き

### 例2: 多層背景
```
背景1（エフェクトOFF：固定）
背景2（エフェクトON：ゆっくり揺れる）
📁 キャラクター（エフェクトON：普通に揺れる）
├─ 体（エフェクトOFF）
├─ 髪（エフェクトON）
└─ 服（エフェクトON）
背景3（エフェクトON：速く揺れる）
```
→ パララックス効果のある奥行きのある動き

## 🔧 改良点

- データ構造をフォルダ対応の階層構造に完全刷新
- レイヤーのフラット化処理でフォルダ内のエフェクト継承を実装
- 複数選択UIの実装
- ドラッグ&ドロップもフォルダに対応
- 書き出し処理もフォルダ構造に完全対応

## 📦 ファイル構成

- `index.html` - メインHTML
- `styles.css` - スタイルシート
- `app.js` - メインロジック
- `folder-system.js` - フォルダシステム
- `pins/` - クマさんピン画像（5種類）
- `WIND_SWAY_ALGORITHM.md` - 技術仕様書

## 💡 Tips

- フォルダ内のレイヤーは左側にインデントされて表示されます
- フォルダを折りたたむと中身が非表示になります
- フォルダにエフェクトをかけると、中の全レイヤーに適用されます
- フォルダ内のレイヤー個別にもエフェクトをかけられます（重ね掛け）
- ピンの色は配置時にランダムで決まります

